import{r as c,d as u,j as C}from"./chunk-D4RADZKF-Bpmw1RCb.js";const h="/assets/homepage-DucF5yST.css";function T(t,a){switch(a.type){case"SET_CART":return{...t,cart:a.cart};case"SET_LOADING":return{...t,isLoading:a.loading};case"SET_ERROR":return{...t,error:a.error};default:return t}}const p=c.createContext(null);function y({children:t,initialCart:a}){const[i,r]=c.useReducer(T,{cart:a,isLoading:!1,error:null}),e=u(),o=u(),s=u();c.useEffect(()=>{e.data?.cart&&r({type:"SET_CART",cart:e.data.cart}),e.data?.error&&r({type:"SET_ERROR",error:e.data.error}),r({type:"SET_LOADING",loading:e.state==="submitting"})},[e.data,e.state]),c.useEffect(()=>{o.data?.cart&&r({type:"SET_CART",cart:o.data.cart}),o.data?.error&&r({type:"SET_ERROR",error:o.data.error})},[o.data]),c.useEffect(()=>{s.data?.cart&&r({type:"SET_CART",cart:s.data.cart}),s.data?.error&&r({type:"SET_ERROR",error:s.data.error})},[s.data]);const E=(n,d=1)=>{r({type:"SET_LOADING",loading:!0}),e.submit({variantId:n,quantity:d.toString()},{method:"post",action:"/cart/add"})},f=n=>{o.submit({lineId:n},{method:"post",action:"/cart/remove"})},R=(n,d)=>{s.submit({lineId:n,quantity:d.toString()},{method:"post",action:"/cart/update"})},m=i.cart?.totalQuantity||0;return C.jsx(p.Provider,{value:{...i,addToCart:E,removeFromCart:f,updateCartLine:R,cartCount:m},children:t})}function l(){const t=c.useContext(p);if(!t)throw new Error("useCart must be used within CartProvider");return t}export{y as C,h,l as u};
